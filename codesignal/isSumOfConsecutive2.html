<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
/* description https://app.codesignal.com/arcade/code-arcade/labyrinth-of-nested-loops/EQSjA5PRfyHueeNkj
Find the number of ways to express n as sum of some (at least two) consecutive positive integers.

Example

For n = 9, the output should be
isSumOfConsecutive2(n) = 2.

There are two ways to represent n = 9: 2 + 3 + 4 = 9 and 4 + 5 = 9.

For n = 8, the output should be
isSumOfConsecutive2(n) = 0.

There are no ways to represent n = 8.
*/
    function isSumOfConsecutive2(n) {
        let count = 0;
        for (let i = 1; i < Math.ceil(n / 2); i++) {
          let sum = i;
          for (let j = i + 1; sum <= n; j++) {
            sum += j;
            if (sum === n) count++;
            if (sum > n) break;
          }
        }
        return count;
      }
/*
example code trace
n = 9

i = 1
sum = 1
j = 2
sum = 1 + 2
j = 3
sum = 3 + 3
j = 4
sum = 6 + 4
10 > 9 so break.
count = 0 still

i = 2
sum = 2
j = 3
sum = 5
j = 4
sum = 5 + 4
9 === 9
count = 1;

i = 3 fails
i = 4
sum = 4
j = 5
sum = 4 + 5
count = 2

*/

/* pseudocode
create a storage named 'count' and initialize it as 0.  This keeps track of how many ways that consecutive integers add up to 'n'.
create a loop that initializes 'i' as 1 and goes until n (probably should stop sooner but unsure of a definite hard cap
probably about n/2 rounded upwards.)

create a storage named sum and initialize it to 0.

on each iteration, create a nested loop that initializes j as i + 1 and runs as long as 'sum' is less than or equal to 'n'
within the loop, add j to sum and re-assign the result of it to sum.
if res equals n, increment 'count'.
if res > than 'n', stop the loop and return to the outter loop.

return count
*/

/* top solution:
Not completely sure on the method and thought process behind this.  Traced code
below the function and I can see that it works... Just not sure what the
idea is.

function isSumOfConsecutive2(n) {

    c=0 //counter
    l=1 //smallest number to be added ('left')
    r=2 //biggest number to be added ('right')
    s=3 //sum of all numbers in range [l,r] (including l and r)

    while(1) {

        if(l==r) return c // rangesize < 2 -> no more fitting ranges can be found -> return counter

        if(s==n) c++ // found a fitting range

        if(s<=n) s += ++r // sum is too small: grow to right side

        if(s>n) s -= l++ // sum is too big: shrink from left side

    }
}

trace:
n = 9

3rd if conditional runs:
3 <= 9
r = 3
s = 3 + 3 // 6

3rd if runs again
6 <= 9
r = 4
s = 6 + 4

4th if runs:
s = 9
l = 2

2nd if runs
s == n
counter = 1

3rd if runs
9 <= 9
s = 9 + 5 // 14
r = 5

4th runs
14 > 9
s = 12
l = 3

4th runs again
12 > 9
s = 12 - 3 // 9
l = 4

2nd runs
9 === 9
counter = 2

3rd runs
9 <= 9
s = 9 + 6 // 15
r = 6

4th runs
15 > 9
s = 15 - 5 // 10
l = 6

1st runs
6 === 6, returns 2.
*/
  </script>
</body>
</html>
